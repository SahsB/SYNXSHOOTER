<!DOCTYPE html>
<html>
<head> 
	<meta charset="UTF-8" />
    <title>Sync</title>
	<script type="text/javascript" src="https://cdn.jsdelivr.net/phaser/2.4.8/phaser.min.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>

<body>
<script src="/socket.io/socket.io.js"></script>
<script type="text/javascript">

var game = new Phaser.Game(800, 600, Phaser.AUTO, '', { preload: preload, create: create, update: update });
var socket = io();

function preload() {
    game.load.image('sky', '/assets/sky.png');
    game.load.image('star', '/assets/star.png');
	game.load.image('player', '/assets/THSR.png');
    //game.load.spritesheet('dude', '/assets/dude.png', 32, 48);

}

var player;

function create() {
    game.physics.startSystem(Phaser.Physics.ARCADE);
	game.add.sprite(0, 0, 'sky');
	player = game.add.sprite(400, 300, 'player');
	game.physics.arcade.enable(player);
	player.body.collideWorldBounds = true;
}

var newX = 0;
var newY = 0;

function update() {
    socket.on('setX', function(data) {
		newX = parseFloat(data);
    });
	socket.on('setY', function(data) {
		newY = parseFloat(data);
    });
    player.frame = 4;
    player.body.velocity.x = 10*(-newY);
	player.body.velocity.y = 10*(-newX);
}

</script>

</body>
</html>